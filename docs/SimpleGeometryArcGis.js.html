<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: SimpleGeometryArcGis.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: SimpleGeometryArcGis.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * @file Defines the ogc.SimpleGeometry class.
 * Copyright (C) 2012 Washington State Department of Transportation.  Licensed under The MIT License (http://opensource.org/licenses/MIT).  
 *@author Jeff Jacobson 
 */
/*global define,dojo,esri*/
define(["ogc/SimpleGeometry", "esri/geometry"
	/** @exports ogc/SimpleGeometryArcGis */
], function (SimpleGeometry) {
	"use strict";

	var exports;

	/**
	 * Converts an ogc.SimpleGeometry into an esri.geometry.Geometry.
	 * @param {SimpleGeometry} ogcg An SimpleGeometry object.
	 * @returns {esri.geometry.Geometry}
	 */
	function ogcToEsriGeometry(ogcg) {
		var json;
		if (ogcg) {
			if (ogcg.type === SimpleGeometry.TYPE_POINT) {
				json = {
					x: ogcg.geometry[0],
					y: ogcg.geometry[1]
				};
			} else if (ogcg.type === SimpleGeometry.TYPE_MULTIPOINT) {
				json = {
					points: ogcg.geometry
				};
			} else if (ogcg.type === SimpleGeometry.TYPE_LINESTRING) {
				json = {
					paths: [ogcg.geometry]
				};
			} else if (ogcg.type === SimpleGeometry.TYPE_MULTILINESTRING) {
				json = {
					paths: ogcg.geometry
				};
			} else if (ogcg.type === SimpleGeometry.TYPE_POLYGON) {
				json = {
					rings: ogcg.geometry
				};
			}
		}

		if (json && ogcg.srid) {
			json.spatialReference = {
				wkid: ogcg.srid
			};
		}

		json = esri.geometry.fromJson(json);

		return json;
	}


	/**
	 * Converts an array of features into a SQL table definition statement. 
	 * @param {esri.Graphic[]} features
	 * @param {String} [tableName] The name of the table in the output "CREATE TABLE" statement. Defaults to "Shapes".
	 * @return {string} Returns a SQL statement that creates a table containing the geometries. 
	 */
	function featuresToSql(features, tableName) {
		var output, feature, geometry, i, l;

		if (!tableName) {
			tableName = "Shapes";
		}

		// TODO: Get attributes from first feature and add in column definition.

		output = ["CREATE TABLE [", tableName, "] ( [Shape] geometry );\nGO\n" ];

		if (features && features.length) {
			output.push(["INSERT INTO [", tableName, "] ([Shape]) VALUES "].join(""));

			for (i = 0, l = features.length; i &lt; l; i += 1) {
				feature = features[i];
				geometry = new SimpleGeometry(feature.geometry);
				geometry = geometry.toSqlConstructor();

				if (i > 0) {
					output.push(",");
				}
				output.push("(" + geometry + ")");
			}

			output.push(";");
		}

		return output.join("");
	}

	exports = {
		ogcToEsriGeometry: ogcToEsriGeometry,
		featuresToSql: featuresToSql
	};

	/**
	 * Converts an ogc.SimpleGeometry into an esri.geometry.Geometry.
	 * @returns {esri.geometry.Geometry}
	 * @memberof ogc/SimpleGeometry~SimpleGeometry
	 * @instance
	*/
	SimpleGeometry.prototype.toEsriGeometry = function () {
		return ogcToEsriGeometry(this);
	};

	return exports;
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="SimpleGeometry.html">ogc/SimpleGeometry</a></li><li><a href="SimpleGeometryArcGis.html">ogc/SimpleGeometryArcGis</a></li></ul><h3>Classes</h3><ul><li><a href="SimpleGeometry-SimpleGeometry.html">SimpleGeometry</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Mon Jun 03 2013 17:31:55 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
