require(["dojo/dom","dojo/on","ogc/SimpleGeometry","ogc/SimpleGeometryArcGis","dijit/Dialog","esri/map","esri/layers/ArcGISTiledMapServiceLayer","esri/toolbars/draw","esri/graphic","esri/geometry/Extent","esri/layers/GraphicsLayer","esri/renderers/SimpleRenderer","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){"use strict";function tt(t){var r,u;u=n.byId("textArea");r=new i(t.geometry)}function nt(n){var t;localStorage!==undefined&&(t=localStorage.graphics?JSON.parse(localStorage.graphics):[],t.push(n.toJson()),localStorage.setItem("graphics",JSON.stringify(t)))}function it(){localStorage!==undefined&&localStorage.graphics&&localStorage.removeItem("graphics")}function rt(){var t,n,i,r,u;if(localStorage!==undefined&&(t=localStorage.getItem("graphics"),t!==null&&t!==undefined))for(t=JSON.parse(t),i=0,r=t.length;i<r;i+=1)try{n=t[i];n=new s(n);/point$/i.test(n.geometry.type)?p.add(n):/^(?:(?:polygon)|(?:extent))$/i.test(n.geometry.type)?b.add(n):/line$/i.test(n.geometry.type)?w.add(n):(u=null,console!==undefined&&console.warn("Unknown geometry type",n))}catch(f){console.error(f)}}function ut(){var n=null;return localStorage!==undefined&&localStorage.extent&&(n=new h(JSON.parse(localStorage.extent))),n}function ft(){for(var n=[],f=[p,w,b],i,t=0,e=f.length;t<e;t+=1)i=f[t],i.graphics.length>0&&n.push(r.featuresToSql(i.graphics,i.id));n=n.join("\n\n");n="<textarea style='width: 640px; height:480px;'>"+n+"<\/textarea>";g?g.set("content",n):g=new u({title:"SQL",content:n});g.show()}function et(){var r;k=new f("map",{extent:ut()});r=new e("http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer");k.addLayer(r);p=new c({id:"points"});w=new c({id:"polylines"});b=new c({id:"polygons"});p.setRenderer(new l((new a).setStyle("circle")));w.setRenderer(new l((new v).setStyle("solid")));b.setRenderer(new l((new y).setStyle("solid"))),function(){for(var i=[p,w,b],t,n=0,r=i.length;n<r;n+=1){t=i[n];k.addLayer(t);t.on("graphic-add",tt)}}();k.on("on-load",function(r){t(window,"resize",function(){r.resize()});r.on("extent-change",function(n){localStorage!==undefined&&localStorage.setItem("extent",JSON.stringify(n.toJson()))});d=new o(r);t(n.byId("clearButton"),"click",function(){p.clear();w.clear();b.clear();it()});t(n.byId("toSqlButton"),"click",ft);t(n.byId("geometryTypeSelect"),"change",function(){this[0].text="Off";var n=this.value;n!==null&&n!==""?(p.disableMouseEvents(),w.disableMouseEvents(),b.disableMouseEvents(),d.activate(n)):(p.enableMouseEvents(),w.enableMouseEvents(),b.enableMouseEvents(),d.deactivate())});d.on("draw-end",function(n){var t;n&&(t=new s(n),n.type==="point"||n.type==="multipoint"?p.add(t):n.type==="polyline"?w.add(t):(n.type==="polygon"||n.type==="extent")&&b.add(t),nt(t))});rt();document.getElementById("addOgcButton").onclick=function(){var f,e,n,t,u;f=document.getElementById("ogcSimpleGeometryTextArea").value;try{e=new i(f,r.spatialReference.wkid);n=e.toEsriGeometry()}catch(o){console.error(o)}n&&(n.type==="point"||n.type==="multipoint"?t=p:n.type==="polyline"?t=w:(n.type==="polygon"||n.type==="extent")&&(t=b),u=new s(n),t.add(u),nt(u))}})}var k,d,p,w,b,g;et()});
//# sourceMappingURL=ogcSimpleGeometryTest.min.js.map